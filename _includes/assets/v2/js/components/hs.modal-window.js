!function(o){"use strict";o.HSCore.components.HSModalWindow={_baseConfig:{bounds:100,debounce:50,overlayOpacity:.48,overlayColor:"#000000",speed:400,type:"onscroll",effect:"fadein",modalIsClosingByEsc:!0,modalIsClosingByOverlay:!0,onOpen:function(){},onClose:function(){},onComplete:function(){}},_pageCollection:o(),init:function(e,t){var a=o(e);if(a.length)return(t=t&&o.isPlainObject(t)?o.extend({},this._baseConfig,t):this._baseConfig).selector=e,this._pageCollection=this._pageCollection.add(a.not(this._pageCollection)),t.autonomous?this.initAutonomousModalWindows(a,t):this.initBaseModalWindows(a,t)},initBaseModalWindows:function(e,t){return e.on("click",function(e){if("Custombox"in window){var a=o(this),n=a.data("modal-target"),l=a.data("modal-effect")||t.effect,i=void 0!==a.data("modal-is-closing-by-esc")?Boolean(a.data("modal-is-closing-by-esc")):t.modalIsClosingByEsc,c=void 0!==a.data("modal-is-closing-by-overlay")?Boolean(a.data("modal-is-closing-by-overlay")):t.modalIsClosingByOverlay;n&&o(n).length&&(new Custombox.modal({content:{target:n,effect:l,close:i,onOpen:function(){t.onOpen.call(o(n))},onClose:function(){t.onClose.call(o(n))},onComplete:function(){t.onComplete.call(o(n))}},overlay:{color:a.data("overlay-color")||t.overlayColor,opacity:a.data("overlay-opacity")||t.overlayOpacity,close:c,speedIn:a.data("speed")||t.speed,speedOut:a.data("speed")||t.speed}}).open(),e.preventDefault())}})},initAutonomousModalWindows:function(e,t){var a=this;return e.each(function(e,n){var l=o(n);switch(l.data("modal-type")){case"hashlink":a.initHashLinkPopup(l,t);break;case"onscroll":a.initOnScrollPopup(l,t);break;case"beforeunload":a.initBeforeUnloadPopup(l,t);break;case"ontarget":a.initOnTargetPopup(l,t);break;case"aftersometime":a.initAfterSomeTimePopup(l,t)}})},initHashLinkPopup:function(e,t){var a=o(window.location.hash),n=o("#"+e.attr("id"));a.length&&a.attr("id")==e.attr("id")&&new Custombox.modal({content:{target:"#"+e.attr("id"),effect:e.data("effect")||t.effect,onOpen:function(){t.onOpen.call(o(n))},onClose:function(){t.onClose.call(o(n))},onComplete:function(){t.onComplete.call(o(n))}},overlay:{color:e.data("overlay-color")||t.overlayColor,opacity:e.data("overlay-opacity")||t.overlayOpacity,speedIn:e.data("speed")||t.speed,speedOut:e.data("speed")||t.speed}}).open()},initOnScrollPopup:function(e,t){var a=o(window),n=e.data("breakpoint")?e.data("breakpoint"):0,l=o("#"+e.attr("id"));a.on("scroll.popup",function(){a.scrollTop()+a.height()>=n&&(new Custombox.modal({content:{target:"#"+e.attr("id"),effect:e.data("effect")||t.effect,onOpen:function(){t.onOpen.call(o(l))},onClose:function(){t.onClose.call(o(l))},onComplete:function(){t.onComplete.call(o(l))}},overlay:{color:e.data("overlay-color")||t.overlayColor,opacity:e.data("overlay-opacity")||t.overlayOpacity,speedIn:e.data("speed")||t.speed,speedOut:e.data("speed")||t.speed}}).open(),a.off("scroll.popup"))}),a.trigger("scroll.popup")},initBeforeUnloadPopup:function(e,t){var a,n=0,l=o("#"+e.attr("id"));window.addEventListener("mousemove",function(i){a&&clearTimeout(a),a=setTimeout(function(){i.clientY<10&&!n&&(n++,new Custombox.modal({content:{target:"#"+e.attr("id"),effect:e.data("effect")||t.effect,onOpen:function(){t.onOpen.call(o(l))},onClose:function(){t.onClose.call(o(l))},onComplete:function(){t.onComplete.call(o(l))}},overlay:{color:e.data("overlay-color")||t.overlayColor,opacity:e.data("overlay-opacity")||t.overlayOpacity,speedIn:e.data("speed")||t.speed,speedOut:e.data("speed")||t.speed}}).open())},10)})},initOnTargetPopup:function(e,t){var a=e.data("target");a&&o(a).length&&appear({bounds:t.bounds,debounce:t.debounce,elements:function(){return document.querySelectorAll(a)},appear:function(n){new Custombox.modal({content:{target:"#"+e.attr("id"),effect:e.data("effect")||t.effect,onOpen:function(){t.onOpen.call(o(a))},onClose:function(){t.onClose.call(o(a))},onComplete:function(){t.onComplete.call(o(a))}},overlay:{color:e.data("overlay-color")||t.overlayColor,opacity:e.data("overlay-opacity")||t.overlayOpacity,speedIn:e.data("speed")||t.speed,speedOut:e.data("speed")||t.speed}}).open()}})},initAfterSomeTimePopup:function(e,t){var a=o("#"+e.attr("id"));setTimeout(function(){new Custombox.modal({content:{target:"#"+e.attr("id"),effect:e.data("effect")||t.effect,onOpen:function(){t.onOpen.call(o(a))},onClose:function(){t.onClose.call(o(a))},onComplete:function(){t.onComplete.call(o(a))}},overlay:{color:e.data("overlay-color")||t.overlayColor,opacity:e.data("overlay-opacity")||t.overlayOpacity,speedIn:e.data("speed")||t.speed,speedOut:e.data("speed")||t.speed}}).open()},e.data("delay")?e.data("delay"):10)}}}(jQuery);