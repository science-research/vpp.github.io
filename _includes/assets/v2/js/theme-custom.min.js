var totalPrice,installationPrice,selector,originSku,originName,currentHref,standardSku=$("#checkout-form .sku").attr("value"),proSku=$("#checkout-form-pro .sku").attr("value"),standardName=$("#checkout-form .product-name").attr("value"),proName=$("#checkout-form-pro .product-name").attr("value");function resetAllOptionRecords(t,e,a){t.find(".ce").prop("checked",!0),t.find(".installation-plus").prop("checked",!1),t.find("#add-to-cart-new-btn").removeClass("disabled"),t.find(".item-qty").val(1),t.find(".grand-total").text("$"+t.find(".ce").attr("title")),t.find(".sku").attr("value",e),t.find(".product-name").attr("value",a),originSku=t.find(".sku").attr("value"),originName=t.find(".product-name").attr("value"),installationPrice=0,t.find("input[type=radio]").change(function(){editionSkuChange(),priceCalculator(installationPrice,t.find("input.item-qty").val())}),t.find("div.qty-change").on("click",function(){changeGrandTotalPrice(t.find("input.item-qty").val())}),t.find(".item-qty").on("change",function(){changeGrandTotalPrice($(this).val())}),t.find("input.item-qty").keypress(function(t){13===t.keyCode&&(t.preventDefault(),changeGrandTotalPrice($(this).val()))}),"customize-service"===e&&($("#customize-requirement").val(""),$("#customize-detail").val(""),t.find(".grand-total").text("$50"),$("#customize-fee").on("change",function(){var t=parseInt($(this).val()?$(this).val():0);if(t=t<40?40:t,$(this).val()!=t)return $(this).val(t),void $("#customize-fee").trigger("change");$(".grand-total").text("$"+t)}))}function removeCart(){localStorage.removeItem("products")}function initProductCartItems(t,e){var a,n=0,o=getAddToCartUrlFromProducts(e);if(t.find(".shopping-cart-content").html(""),e.length){for(var i=0;i<e.length;i++){var r="",s="";e[i].options&&"support-service"==e[i].sku&&($.each(e[i].options,function(t,e){s+="<tr><td>"+e.support_name+"</td><td>"+e.support_qty+"</td></tr>"}),r='<div id="'+e[i].sku+'"><button type="button" class="btn h7 mt-n2" data-toggle="collapse" data-target="#'+e[i].sku+'-options" aria-expanded="false" aria-controls="'+e[i].sku+'-options">Details<span class="card-btn-arrow"><span class="fas fa-arrow-down small"></span></span></button><div id="'+e[i].sku+'-options" class="ml-3 mt-n1 collapse" aria-labelledby="'+e[i].sku+'" data-parent="#'+e[i].sku+'"><table class="table table-sm table-borderless"><tr><td>Name</td><td>Qty</td></tr>'+s+"</table></div></div>"),$(".shopping-cart-content").add('<div class="top-cart-item clearfix"><div class="top-cart-item-image"><a href="#"><img src="'+e[i].logo+'" alt="'+e[i].name+'"></a></div><div class="top-cart-item-desc text-left"><a href="#">'+e[i].name+'</a><span class="top-cart-item-price" title="'+e[i].price+'">$'+e[i].price+"</span>"+r+'<i id="'+e[i].sku+'" class="fas fa-trash-alt remove-item"></i><span class="top-cart-item-quantity" title="'+e[i].qty+'">x '+e[i].qty+"</span></div></div>").appendTo($(".shopping-cart-content")),n+=e[i].qty*e[i].price}$(".top-cart-action").html('<span class="float-left top-checkout-price h5" title="'+n+'">$'+n+'</span>\n            <div class="top-cart-checkout float-right">\n              <a id="check-out-now" onclick="removeCart()" class="btn btn-soft btn-sm-primary mp-bg-navy transition-3d-hover text-white pt-1 pb-1"\n                  href="https://dashboard.mageplaza.com/onestepcheckout/index/">Checkout</a>\n            </div>'),a=$(".top-cart-checkout a").attr("href");var c="adds?"+o+"submit=Checkout+now&mprc=default";$(".top-cart-checkout a").attr("href",a+c)}else t.find(".shopping-cart-content").html('<span class="btn btn-icon btn-soft-primary rounded-circle mb-3">                <span class="fas fa-shopping-basket btn-icon__inner"></span>              </span>              <span class="d-block">Your Cart is Empty</span>'),t.find(".top-cart-action").html("")}function changeGrandTotalPrice(t){parseInt(t)>0?(selector.find("#add-to-cart-new-btn").removeClass("disabled"),priceCalculator(getInstallationPrice(selector),t)):(selector.find(".grand-total").text("$0"),selector.find("#add-to-cart-new-btn").addClass("disabled"))}function getInstallationPrice(t){return installationPrice=t.find("input[type=checkbox]").is(":checked")?50:0,t.find("input[type=checkbox]").change(function(){$(this).is(":checked")?priceCalculator(installationPrice=50,t.find("input.item-qty").val()):priceCalculator(installationPrice=0,t.find("input.item-qty").val())}),installationPrice}function priceCalculator(t,e){totalPrice=selector.find("input[type=radio]:checked").attr("title"),totalPrice=(parseInt(totalPrice)+t)*e,selector.find(".grand-total").text("$"+totalPrice)}function editionSkuChange(){"0"===selector.find("input[type=radio]:checked").attr("value")?(selector.find(".sku").attr("value",originSku+"-ee"),selector.find(".product-name").attr("value",originName+" EE")):(selector.find(".sku").attr("value",originSku),selector.find(".product-name").attr("value",originName))}function getAddToCartProductInfo(t){if(localStorage){var e,a,n=[],o=!1;JSON.parse(localStorage.getItem("products"))&&(n=JSON.parse(localStorage.getItem("products"))),e=null!=totalPrice?totalPrice:t.find(".ce").attr("title"),t.find("input[type=checkbox]").is(":checked")?(a=e/t.find("input.item-qty").val()-t.find("input[type=checkbox]").attr("title"),o=!0):"customize-service"===t.find(".sku").attr("value")?(a=t.find("#customize-fee").val(),o=!1):(a=e/t.find("input.item-qty").val(),o=!1),n=getInstallationServiceInfo(n=getExtensionsInfo(n,a),o),localStorage.setItem("products",JSON.stringify(n)),$(".add-to-cart-new h3").text(t.find(".product-name").attr("value"))}}function getCartItemNum(){var t=[],e=0,a=0,n=$("#item-num");localStorage&&JSON.parse(localStorage.getItem("products"))&&(t=JSON.parse(localStorage.getItem("products")));var o=0;if(t.length){for(var i=0;i<t.length;i++)o+=t[i].qty,e+=t[i].price*t[i].qty,t[i].price>0&&(a+=t[i].qty);n.show(),n.text(o)}else n.hide(),n.text(0);mpGlobalScript.checkPromoCondition(e,a)}function getExtensionsInfo(t,e){var a=!1,n=selector.find(".sku").attr("value"),o=-1;for(var i in t){if(t[i].sku===n){"customize-service"===n?(o=i,a=!1):(t[i].qty=t[i].qty+parseInt(selector.find("input.item-qty").val()),a=!0);break}a=!1}return-1!==o&&t.splice(o,1),!1===a&&("customize-service"!==n?t.push({sku:selector.find(".sku").attr("value"),name:selector.find(".product-name").attr("value"),logo:selector.find(".product-logo").attr("value"),qty:parseInt(selector.find("input.item-qty").val()),price:e}):t.push({sku:selector.find(".sku").attr("value"),name:selector.find(".product-name").attr("value"),logo:selector.find(".product-logo").attr("value"),qty:1,price:e,options:{1506:e,1505:selector.find("#customize-requirement").val(),1507:selector.find("#customize-detail").val()}})),t}function getInstallationServiceInfo(t,e){var a=!1;for(var n in t)if(!0===e){if("installation-service"===t[n].sku){t[n].qty=t[n].qty+parseInt(selector.find("input.item-qty").val()),a=!0;break}a=!1}return!1===a&&!0===e&&t.push({sku:"installation-service",name:"Installation Service",logo:selector.find(".installation-logo").attr("value")+"/assets/img/extensions/installation-service.png",qty:parseInt(selector.find("input.item-qty").val()),price:50}),t}function getAddToCartUrlFromProducts(t){var e="";if(null!=t)for(var a=0;a<t.length;a++)if("support-service"==t[a].sku)$.each(t[a].options,function(t,a){e+="supports["+a.support_sku+"]="+a.support_qty+"&"});else if(e+="sku["+t[a].sku+"]="+t[a].qty+"&",t[a].hasOwnProperty("options"))for(var n in t[a].options)t[a].options.hasOwnProperty(n)&&(e+="options["+t[a].sku+"]["+n+"]="+encodeURI(t[a].options[n])+"&");return e}function getAddToCartUrl(t,e){var a,n=0,o=0,i=$("#item-num"),r=parseInt(i.text()),s=JSON.parse(localStorage.getItem("products")),c=getAddToCartUrlFromProducts(s);if(null!=s)for(var l=0;l<s.length;l++)n+=s[l].price*s[l].qty,s[l].price>0&&(o+=s[l].qty);var d="adds?"+c+"submit=Checkout+now&mprc="+t.find("input[name=mprc]").val(),p=t.find("input.item-qty");r+=a=p.length?parseInt(p.val()):1,t.find("input[type=checkbox]").is(":checked")&&(r+=a),i.show(),i.text(r),$(".add-to-cart-new .check-out-now a").attr("href",e+d),mpGlobalScript.checkPromoCondition(n,o)}function reviewListTree(t,e,a){var n;n=$(t).length,$(t).slice(0,a).show(),n<=a?$(e).hide():$(e).on("click",function(){$(this).hasClass("load-more")?($(t+":hidden").slideDown("fast"),$(this).removeClass("load-more").addClass("back-to-top"),$(this).text("Collapse")):($(t).slice(a,n).slideUp("fast"),$(this).removeClass("back-to-top").addClass("load-more"),$(this).text("Load More"))})}function addToCartbySku(t){var e=$("#item-num"),a=parseInt(e.text());for(var n in mpExtensions)for(var o in t)if((mpExtensions[n].sku==t[o].sku||mpExtensions[n].sku+"-ee"==t[o].sku)&&localStorage){var i,r,s=[];JSON.parse(localStorage.getItem("products"))&&(s=JSON.parse(localStorage.getItem("products"))),t[o].sku.lastIndexOf("-ee")>=0?(i=parseInt(mpExtensions[n].price)+200,r=mpExtensions[n].name+" EE"):(i=parseInt(mpExtensions[n].price),r=mpExtensions[n].name);var c=!1;for(var l in s){if(s[l].sku===t[o].sku){s[l].qty=s[l].qty+t[o].qty,c=!0;break}c=!1}!1===c&&s.push({sku:t[o].sku,name:r,logo:mpExtensions[n].logo,qty:t[o].qty,price:i}),localStorage.setItem("products",JSON.stringify(s)),a+=t[o].qty,e.show(),e.text(a)}}function mpFlyNav(){$(".mp-offset-flynav").offset()&&($(window).scrollTop()>$(".mp-offset-flynav").offset().top?$(".fly-nav-wrapper").fadeIn(500):$(".fly-nav-wrapper").fadeOut(500))}currentHref=$(".add-to-cart-new .check-out-now a").attr("href"),$(".extension-meta-container #add-cart-standard, #add-cart-standard ").on("click",function(t){resetAllOptionRecords(selector=$("#checkout-form"),standardSku,standardName),getInstallationPrice(selector)}),$(".extension-meta-container #add-cart-pro").on("click",function(){resetAllOptionRecords(selector=$("#checkout-form-pro"),proSku,proName),getInstallationPrice(selector)}),$("#checkout-form .add-to-cart").on("click",function(t){getAddToCartProductInfo($("#checkout-form")),getAddToCartUrl($("#checkout-form"),currentHref),totalPrice=null}),$("#checkout-form-pro .add-to-cart").on("click",function(){getAddToCartProductInfo($("#checkout-form-pro")),getAddToCartUrl($("#checkout-form-pro"),currentHref),totalPrice=null}),$("body").click(function(t){$(t.target).closest("#shoppingCartDropdown").length||$(t.target).closest("a#shoppingCartDropdownInvoker").length||$(t.target).hasClass("remove-item")||$("#shoppingCartDropdown").hide()}),$("#shoppingCartDropdownInvoker").on("click",function(){var t=[];JSON.parse(localStorage.getItem("products"))&&(t=JSON.parse(localStorage.getItem("products"))),initProductCartItems($("#shoppingCartDropdown"),t),$(".top-cart-item .top-cart-item-desc i").each(function(){$(this).on("click",function(){for(var e,a,n=0,o=0,i=$(".top-cart-action .top-checkout-price"),r=parseInt($("#item-num").text()),s=parseInt($(this).parent().find(".top-cart-item-quantity").attr("title"))*parseInt($(this).parent().find(".top-cart-item-price").attr("title")),c=parseInt(i.attr("title")),l=$(this).attr("id"),d=0;d<t.length;d++)if(l===t[d].sku){e=d,a=r-t[d].qty,$("#item-num").text(a),0===a?($(".top-cart-action").html(""),$("#shoppingCartDropdown .shopping-cart-content").html('<span class="btn btn-icon btn-soft-primary rounded-circle mb-3">                <span class="fas fa-shopping-basket btn-icon__inner"></span>              </span>              <span class="d-block">Your Cart is Empty</span>'),$("#item-num").hide()):(i.attr("title",c-s),i.text("$"+(c-s)));break}if($(this).parent().parent().remove(),-1!==e&&t.splice(e,1),localStorage.removeItem("products"),localStorage.setItem("products",JSON.stringify(t)),null!=t)for(var p=0;p<t.length;p++)n+=t[p].price*t[p].qty,t[p].price>0&&(o+=t[p].qty);mpGlobalScript.checkPromoCondition(n,o)})}),$("#shoppingCartDropdown").show()}),getCartItemNum(),reviewListTree("#review-section div.review-content","#review-section .load-more",5),reviewListTree(".simple-release-note ul.list-group",".simple-release-note .load-more",3),$("#fbt-add-cart").on("click",function(){var t=$("#fbt-container-plus-item").find(".fbt-item-title").attr("data-sku");item=[{sku:t,qty:1}],addToCartbySku(item)}),$("#mageplaza-rating-stars").starrr({emptyClass:"far fa-star",fullClass:"fas fa-star",change:function(t,e){$("#review-form").find("input[id=rating-star]").val(e)}}),$("#review-form").submit(function(t){t.preventDefault();var e=$("form#review-form").serialize(),a=$("form#review-form input#rating-star").val(),n=$("form#review-form button#submit-button");"0"===a?alert("Please fill out the rating"):(n.prop("disabled",!0),$.ajax({type:"POST",url:"https://dashboard.mageplaza.com/mageplaza/review/ajaxSubmit",data:e,dataType:"json",success:function(t){"success"===t.alert?(alert(t.msg),$("#review-form")[0].reset()):alert(t.msg)},complete:function(){n.prop("disabled",!1)}}))}),$("#subscribe-form").submit(function(t){t.preventDefault();var e=$("form#subscribe-form").serialize();$.ajax({type:"POST",url:"https://dashboard.mageplaza.com/mageplaza/subscribe/ajaxSubscribe",data:e,dataType:"json",success:function(t){"success"===t.alert?($("form#subscribe-form .mp-message-box").html('<div class="success-message">'+t.msg+"</div>"),$("form#subscribe-form")[0].reset()):$("form#subscribe-form .mp-message-box").html('<div class="error-message">'+t.msg+"</div>")}})}),$("#stay-in-know-form").submit(function(t){t.preventDefault();var e=$("form#stay-in-know-form").serialize();$.ajax({type:"POST",url:"https://dashboard.mageplaza.com/mageplaza/subscribe/ajaxSubscribe",data:e,dataType:"json",success:function(t){"success"===t.alert?($("form#stay-in-know-form .mp-message-box").html('<div class="success-message">'+t.msg+"</div>"),$("form#stay-in-know-form")[0].reset()):$("form#stay-in-know-form .mp-message-box").html('<div class="error-message">'+t.msg+"</div>")}})}),$(document).ready(function(){$(".owl-carousel").owlCarousel({margin:10,nav:!1,items:1,loop:!0,autoplay:!0,autoplayTimeout:5e3}),$.HSCore.components.HSChartPie&&$.HSCore.components.HSChartPie.init(".js-pie")}),mpFlyNav(),$(window).scroll(function(){mpFlyNav()});var fbtWrappers=$(".extension-fbt-wrapper");function calculateFbtCombo(t){var e=parseInt(t.find(".extension-fbt-main-container").attr("data-product-price")),a=t.find(".meta-extension-fbt-container"),n=e,o=t.find("a.extension-fbt-add-cart").attr("href"),i=e;a.find(".card-body input[type=checkbox]").prop("checked",!0),showHideBenefitText(t),void 0===t.attr("data-site-discount-2")?(a.each(function(){var t=parseInt($(this).attr("data-fbt-discount"));n+=parseInt($(this).attr("data-fbt-price")),i+=parseInt($(this).attr("data-fbt-price"))-t}),updateComboPrice(n,i,t),updateAdditionalUrl(o,t),a.find(".card-body input[type=checkbox]").on("change",function(){var e=$(this).parents(".meta-extension-fbt-container"),a=parseInt(e.attr("data-fbt-discount"));e.hasClass("unselect")?(e.removeClass("unselect"),n+=parseInt(e.attr("data-fbt-price")),i+=parseInt(e.attr("data-fbt-price"))-a,updateComboPrice(n,i,t),updateAdditionalUrl(o,t)):(e.addClass("unselect"),n-=parseInt(e.attr("data-fbt-price")),i-=parseInt(e.attr("data-fbt-price"))-a,updateComboPrice(n,i,t),updateAdditionalUrl(o,t)),hideShowSpecialPrice(i,n,t),showHideBenefitText(t)})):(a.each(function(){n+=parseInt($(this).attr("data-fbt-price"))}),updateSiteComboPrice(n,t),updateAdditionalUrl(o,t),a.find(".card-body input[type=checkbox]").on("change",function(){var e=$(this).parents(".meta-extension-fbt-container");e.hasClass("unselect")?(e.removeClass("unselect"),updateSiteComboPrice(n+=parseInt(e.attr("data-fbt-price")),t),updateAdditionalUrl(o,t)):(e.addClass("unselect"),updateSiteComboPrice(n-=parseInt(e.attr("data-fbt-price")),t),updateAdditionalUrl(o,t)),showHideBenefitText(t)}))}function showHideBenefitText(t){var e=t.find(".card-body input[type=checkbox]:checked"),a=t.find(".extension-fbt-container-combo ul.combo-benefit"),n=$("li.extra-benefit");2===e.length?(a.show(),n.show()):(a.hide(),n.hide())}function updateSiteComboPrice(t,e){var a,n=e.find(".card-body input[type=checkbox]:checked"),o=0;1===n.length&&(o=parseInt(e.attr("data-site-discount-2"))),2===n.length&&(o=parseInt(e.attr("data-site-discount-3"))),a=t-t*o/100,e.find(".extension-fbt-container-combo .fbt-final-price span.fbt-price").text(a),e.find(".extension-fbt-container-combo .fbt-origin-price span.fbt-price").text(t),e.find(".extension-fbt-container-combo .extension-fbt-container-combo__discount-flag span.discount-rate").text(o),hideShowSpecialPrice(a,t,e)}function updateComboPrice(t,e,a){var n=Math.round((t-e)/t*100);a.find(".extension-fbt-container-combo .fbt-final-price span.fbt-price").text(e),a.find(".extension-fbt-container-combo .fbt-origin-price span.fbt-price").text(t),a.find(".extension-fbt-container-combo .extension-fbt-container-combo__discount-flag span.discount-rate").text(n)}function updateAdditionalUrl(t,e){var a="";e.find(".meta-extension-fbt-container").each(function(){$(this).find("input[type=checkbox]").prop("checked")&&(a+="&sku["+$(this).attr("data-fbt-sku")+"]=1")}),a+="&submit=Checkout+now&mprc=default",e.find("a.extension-fbt-add-cart").attr("href",t+a)}function hideShowSpecialPrice(t,e,a){t===e?(a.find(".extension-fbt-container-combo .fbt-origin-price").hide(),a.find(".extension-fbt-container-combo__new-price span.fbt-final-price").removeClass("text-danger")):(a.find(".extension-fbt-container-combo .fbt-origin-price").show(),a.find(".extension-fbt-container-combo__new-price span.fbt-final-price").addClass("text-danger"))}function openNewTab(t){window.open(t,"_blank")}fbtWrappers.each(function(){calculateFbtCombo($(this))}),$("a#mp-search-button").on("click",function(){$("#searchPushTop").slideToggle("fast"),$(this).hasClass("active")?$(this).removeClass("active"):($("#searchPushTop input").focus(),$(this).addClass("active"))});