!function(e){"use strict";var t=window.MegaMenu||{};function n(e,t,n,i){var s=this;this.$element=e,this.menu=t,this.options=n,this.$container=i,Object.defineProperties(this,{itemClass:{get:function(){return"mega-menu"===s.options.type?s.options.classMap.hasMegaMenu:s.options.classMap.hasSubMenu}},activeItemClass:{get:function(){return"mega-menu"===s.options.type?s.options.classMap.hasMegaMenuActive:s.options.classMap.hasSubMenuActive}},menuClass:{get:function(){return"mega-menu"===s.options.type?s.options.classMap.megaMenu:s.options.classMap.subMenu}},isOpened:{get:function(){return this.$element.hasClass(this.activeItemClass.slice(1))}}}),this.menu.addClass("animated").on("click.HSMegaMenu",function(e){s._updateMenuBounds()}),this.$element.data("max-width")&&this.menu.css("max-width",this.$element.data("max-width")),this.$element.data("position")&&this.menu.addClass("hs-position-"+this.$element.data("position")),this.options.animationOut&&this.menu.on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(e){s.menu.hasClass(s.options.animationOut)&&(s.$element.removeClass(s.activeItemClass.slice(1)),s.options.afterClose.call(s,s.$element,s.menu)),s.menu.hasClass(s.options.animationIn)&&s.options.afterOpen.call(s,s.$element,s.menu),e.stopPropagation(),e.preventDefault()})}function i(){return"ontouchstart"in window}(t=function(){return function t(n,i){var s=this;this.$element=e(n),this.options=e.extend(!0,{},t.defaults,i),this._items=e(),Object.defineProperties(this,{itemsSelector:{get:function(){return s.options.classMap.hasSubMenu+","+s.options.classMap.hasMegaMenu}},_tempChain:{value:null,writable:!0},state:{value:null,writable:!0}}),this.initialize()}}()).defaults={event:"hover",direction:"horizontal",breakpoint:991,animationIn:!1,animationOut:!1,rtl:!1,hideTimeOut:300,sideBarRatio:.25,pageContainer:e("body"),classMap:{initialized:".hs-menu-initialized",mobileState:".hs-mobile-state",subMenu:".hs-sub-menu",hasSubMenu:".hs-has-sub-menu",hasSubMenuActive:".hs-sub-menu-opened",megaMenu:".hs-mega-menu",hasMegaMenu:".hs-has-mega-menu",hasMegaMenuActive:".hs-mega-menu-opened"},mobileSpeed:400,mobileEasing:"linear",isMenuOpened:!1,beforeOpen:function(){},beforeClose:function(){},afterOpen:function(){},afterClose:function(){}},t.prototype.initialize=function(){var t=this,n=e(window);return this.options.rtl&&this.$element.addClass("hs-rtl"),this.$element.addClass(this.options.classMap.initialized.slice(1)).addClass("hs-menu-"+this.options.direction),n.on("resize.HSMegaMenu",function(e){t.resizeTimeOutId&&clearTimeout(t.resizeTimeOutId),t.resizeTimeOutId=setTimeout(function(){window.innerWidth<=t.options.breakpoint&&"desktop"===t.state?t.initMobileBehavior():window.innerWidth>t.options.breakpoint&&"mobile"===t.state&&t.initDesktopBehavior(),t.refresh()},50)}),window.innerWidth>=768&&e(document).on("click.HSMegaMenu touchstart.HSMegaMenu","body",function(n){var i=e(n.target).parents(t.itemsSelector);t.closeAll(i.add(e(n.target)))}),n.on("keyup.HSMegaMenu",function(e){e.keyCode&&27===e.keyCode&&(t.closeAll(),t.options.isMenuOpened=!1)}),window.innerWidth<=this.options.breakpoint?this.initMobileBehavior():window.innerWidth>this.options.breakpoint&&this.initDesktopBehavior(),this.smartPositions(),this},t.prototype.smartPositions=function(){var t=this;this.$element.find(this.options.classMap.subMenu).each(function(i,s){n.smartPosition(e(s),t.options)})},t.prototype.bindEvents=function(){var t=this;"hover"!==this.options.event||i()?(this.$element.on("click.HSMegaMenu",i()?this.options.classMap.hasMegaMenu+" > a, "+this.options.classMap.hasSubMenu+" > a":this.options.classMap.hasMegaMenu+':not([data-event="hover"]) > a,'+this.options.classMap.hasSubMenu+':not([data-event="hover"]) > a',function(n){var i,s=e(this).parent();s.parents(t.itemsSelector);s.data("HSMenuItem")||t.initMenuItem(s,t.getType(s)),t.closeAll(s.add(s.parents(t.itemsSelector))),(i=s.addClass("hs-event-prevented").data("HSMenuItem")).isOpened?i.desktopHide():i.desktopShow(),n.preventDefault(),n.stopPropagation()}),i()||this.$element.on("mouseenter.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="hover"],'+this.options.classMap.hasSubMenu+'[data-event="hover"]',function(n){var i=e(this),s=i.parents(t.itemsSelector);i.data("HSMenuItem")||t.initMenuItem(i,t.getType(i)),t.closeAll(i.add(s)),s.add(i).each(function(t,n){var i=e(n).data("HSMenuItem");i.hideTimeOutId&&clearTimeout(i.hideTimeOutId),i.desktopShow()}),n.preventDefault(),n.stopPropagation()}).on("mouseleave.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="hover"],'+this.options.classMap.hasSubMenu+'[data-event="hover"]',function(n){e(this).data("HSMenuItem").hideTimeOutId=setTimeout(function(){t.closeAll(e(n.relatedTarget).parents(t.itemsSelector))},t.options.hideTimeOut),n.preventDefault(),n.stopPropagation()})):this.$element.on("mouseenter.HSMegaMenu",this.options.classMap.hasMegaMenu+':not([data-event="click"]),'+this.options.classMap.hasSubMenu+':not([data-event="click"])',function(n){var i=e(this),s=i.parents(t.itemsSelector);i.data("HSMenuItem")||t.initMenuItem(i,t.getType(i)),s=s.add(i),t.closeAll(s),s.each(function(t,n){var i=e(n).data("HSMenuItem");i.hideTimeOutId&&clearTimeout(i.hideTimeOutId),i.desktopShow()}),t._items=t._items.not(s),t._tempChain=s,n.preventDefault(),n.stopPropagation()}).on("mouseleave.HSMegaMenu",this.options.classMap.hasMegaMenu+':not([data-event="click"]),'+this.options.classMap.hasSubMenu+':not([data-event="click"])',function(n){if(e(this).data("HSMenuItem")){var i=e(this).data("HSMenuItem"),s=e(n.relatedTarget).parents(t.itemsSelector);i.hideTimeOutId=setTimeout(function(){t.closeAll(s)},t.options.hideTimeOut),t._items=t._items.add(t._tempChain),t._tempChain=null,n.preventDefault(),n.stopPropagation()}}).on("click.HSMegaMenu touchstart.HSMegaMenu",this.options.classMap.hasMegaMenu+'[data-event="click"] > a, '+this.options.classMap.hasSubMenu+'[data-event="click"] > a',function(n){var i,s=e(this).parent('[data-event="click"]');s.data("HSMenuItem")||t.initMenuItem(s,t.getType(s)),t.closeAll(s.add(s.parents(t.itemsSelector))),(i=s.data("HSMenuItem")).isOpened?i.desktopHide():i.desktopShow(),n.preventDefault(),n.stopPropagation()}),this.$element.on("keydown.HSMegaMenu",this.options.classMap.hasMegaMenu+" > a,"+this.options.classMap.hasSubMenu+" > a",function(n){var i,s=e(this),o=s.parent();o.data("HSMenuItem")||t.initMenuItem(o,t.getType(o)),i=o.data("HSMenuItem"),s.is(":focus")&&(n.keyCode&&40===n.keyCode&&(n.preventDefault(),i.desktopShow(),t.options.isMenuOpened=!0),n.keyCode&&13===n.keyCode&&(!0===t.options.isMenuOpened?(i.desktopHide(),t.options.isMenuOpened=!1):(i.desktopShow(),t.options.isMenuOpened=!0))),s.on("focusout",function(){t.options.isMenuOpened=!1}),i.menu.find("a").on("focusout",function(){setTimeout(function(){i.menu.find("a").is(":focus")||(i.desktopHide(),t.options.isMenuOpened=!1)})})})},t.prototype.initMenuItem=function(t,i){var s=new n(t,t.children(this.options.classMap["mega-menu"===i?"megaMenu":"subMenu"]),e.extend(!0,{type:i},this.options,t.data()),this.$element);t.data("HSMenuItem",s),this._items=this._items.add(t)},t.prototype.initMobileBehavior=function(){var t=this;this.state="mobile",this.$element.off(".HSMegaMenu").addClass(this.options.classMap.mobileState.slice(1)).on("click.HSMegaMenu",t.options.classMap.hasSubMenu+" > a, "+t.options.classMap.hasMegaMenu+" > a",function(n){var i,s=e(this).parent();s.data("HSMenuItem")||t.initMenuItem(s,t.getType(s)),t.closeAll(s.parents(t.itemsSelector).add(s)),(i=s.data("HSMenuItem")).isOpened?i.mobileHide():i.mobileShow(),n.preventDefault(),n.stopPropagation()}).find(this.itemsSelector).not(this.options.classMap.hasSubMenuActive+","+this.options.classMap.hasMegaMenuActive).children(this.options.classMap.subMenu+","+this.options.classMap.megaMenu).hide()},t.prototype.initDesktopBehavior=function(){this.state="desktop",this.$element.removeClass(this.options.classMap.mobileState.slice(1)).off(".HSMegaMenu").find(this.itemsSelector).not(this.options.classMap.hasSubMenuActive+","+this.options.classMap.hasMegaMenuActive).children(this.options.classMap.subMenu+","+this.options.classMap.megaMenu).hide(),this.bindEvents()},t.prototype.closeAll=function(t){var n=this;return this._items.not(t&&t.length?t:e()).each(function(t,i){e(i).removeClass("hs-event-prevented").data("HSMenuItem")["mobile"===n.state?"mobileHide":"desktopHide"]()})},t.prototype.getType=function(e){return e&&e.length?e.hasClass(this.options.classMap.hasSubMenu.slice(1))?"sub-menu":e.hasClass(this.options.classMap.hasMegaMenu.slice(1))?"mega-menu":null:null},t.prototype.getState=function(){return this.state},t.prototype.refresh=function(){return this._items.add(this._tempChain).each(function(t,n){e(n).data("HSMenuItem")._updateMenuBounds()})},n.prototype.desktopShow=function(){return this.menu.length?(this.$element.addClass(this.activeItemClass.slice(1)),this._updateMenuBounds(),this.menu.show(),"horizontal"===this.options.direction&&this.smartPosition(this.menu,this.options),this.options.animationOut?this.menu.removeClass(this.options.animationOut):this.options.afterOpen.call(this,this.$element,this.menu),this.options.animationIn&&this.menu.addClass(this.options.animationIn),this):this},n.prototype.desktopHide=function(){return this.menu.length?(this.$element.removeClass(this.activeItemClass.slice(1)),this.menu.hide(),this.options.animationIn&&this.menu.removeClass(this.options.animationIn),this.options.animationOut?this.menu.addClass(this.options.animationOut):this.options.afterClose.call(this,this.$element,this.menu),this):this},n.prototype.mobileShow=function(){var e=this;return this.menu.length?(this.menu.removeClass(this.options.animationIn).removeClass(this.options.animationOut).stop().slideDown({duration:e.options.mobileSpeed,easing:e.options.mobileEasing,complete:function(){e.options.afterOpen.call(e,e.$element,e.menu)}}),this.$element.addClass(this.activeItemClass.slice(1)),this):this},n.prototype.mobileHide=function(){var e=this;return this.menu.length?(this.menu.stop().slideUp({duration:e.options.mobileSpeed,easing:e.options.mobileEasing,complete:function(){e.options.afterClose.call(e,e.$element,e.menu)}}),this.$element.removeClass(this.activeItemClass.slice(1)),this):this},n.prototype.smartPosition=function(e,t){n.smartPosition(e,t)},n.smartPosition=function(t,n){if(t||t.length){e(window);t.removeClass("hs-reversed"),n.rtl?t.offset().left<0&&t.addClass("hs-reversed"):t.offset().left+t.outerWidth()>window.innerWidth&&t.addClass("hs-reversed")}},n.prototype._updateMenuBounds=function(){var t="auto";if("vertical"===this.options.direction&&"mega-menu"===this.options.type){if(this.$container&&"desktop"===this.$container.data("HSMegaMenu").getState()?(this.options.pageContainer.length||(this.options.pageContainer=e("body")),t=this.options.pageContainer.outerWidth()*(1-this.options.sideBarRatio)):t="auto",this.menu.css({width:t,height:"auto"}),this.menu.outerHeight()>this.$container.outerHeight())return;this.menu.css("height","100%")}},e.fn.HSMegaMenu=function(){var e,n,i=this,s=arguments[0],o=Array.prototype.slice.call(arguments,1),a=i.length;for(e=0;e<a;e++)if("object"==typeof s||void 0===s?i[e].MegaMenu=new t(i[e],s):n=i[e].MegaMenu[s].apply(i[e].MegaMenu,o),void 0!==n)return n;return i}}(jQuery);